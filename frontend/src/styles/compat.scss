// ========================================
// OA系统 - 浏览器兼容性样式
// ========================================

// ========================================
// CSS变量降级 (IE11 不支持，但提供后备)
// ========================================
:root {
  // 主色调
  --primary-color: #6366f1;
  --primary-light: #818cf8;
  --primary-dark: #4f46e5;
  
  // 状态色
  --success-color: #10b981;
  --warning-color: #f59e0b;
  --danger-color: #ef4444;
  --info-color: #3b82f6;
  
  // 文字色
  --text-primary: #1e293b;
  --text-secondary: #64748b;
  --text-muted: #94a3b8;
  
  // 背景色
  --bg-page: #f1f5f9;
  --bg-card: #ffffff;
  --bg-dark: #0f172a;
  
  // 边框色
  --border-color: rgba(148, 163, 184, 0.2);
  
  // 圆角
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 16px;
  --radius-xl: 24px;
  
  // 阴影
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

// ========================================
// Flexbox 兼容性
// ========================================
.flex {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}

.flex-inline {
  display: -webkit-inline-box;
  display: -webkit-inline-flex;
  display: -ms-inline-flexbox;
  display: inline-flex;
}

.flex-col {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
}

.flex-row {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;
}

.flex-wrap {
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
}

.flex-1 {
  -webkit-box-flex: 1;
  -webkit-flex: 1 1 0%;
  -ms-flex: 1 1 0%;
  flex: 1 1 0%;
}

.items-center {
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
}

.items-start {
  -webkit-box-align: start;
  -webkit-align-items: flex-start;
  -ms-flex-align: start;
  align-items: flex-start;
}

.items-end {
  -webkit-box-align: end;
  -webkit-align-items: flex-end;
  -ms-flex-align: end;
  align-items: flex-end;
}

.justify-center {
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
  justify-content: center;
}

.justify-between {
  -webkit-box-pack: justify;
  -webkit-justify-content: space-between;
  -ms-flex-pack: justify;
  justify-content: space-between;
}

.justify-around {
  -webkit-justify-content: space-around;
  -ms-flex-pack: distribute;
  justify-content: space-around;
}

.justify-end {
  -webkit-box-pack: end;
  -webkit-justify-content: flex-end;
  -ms-flex-pack: end;
  justify-content: flex-end;
}

// ========================================
// Grid 兼容性 (带 Flexbox 降级)
// ========================================
@supports not (display: grid) {
  .grid {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-flex-wrap: wrap;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
  }
}

// ========================================
// Transform 兼容性
// ========================================
@mixin transform($value) {
  -webkit-transform: $value;
  -moz-transform: $value;
  -ms-transform: $value;
  -o-transform: $value;
  transform: $value;
}

@mixin transition($value) {
  -webkit-transition: $value;
  -moz-transition: $value;
  -o-transition: $value;
  transition: $value;
}

@mixin animation($value) {
  -webkit-animation: $value;
  -moz-animation: $value;
  -o-animation: $value;
  animation: $value;
}

// ========================================
// 滤镜兼容性
// ========================================
@mixin backdrop-filter($value) {
  -webkit-backdrop-filter: $value;
  backdrop-filter: $value;
}

@mixin filter($value) {
  -webkit-filter: $value;
  filter: $value;
}

// ========================================
// 文字截断兼容性
// ========================================
.truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// ========================================
// 用户选择兼容性
// ========================================
.select-none {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.select-text {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

.select-all {
  -webkit-user-select: all;
  -moz-user-select: all;
  -ms-user-select: all;
  user-select: all;
}

// ========================================
// 滚动行为兼容性
// ========================================
.scroll-smooth {
  -webkit-scroll-behavior: smooth;
  scroll-behavior: smooth;
}

.overscroll-none {
  -webkit-overscroll-behavior: none;
  overscroll-behavior: none;
}

.overflow-touch {
  -webkit-overflow-scrolling: touch;
}

// ========================================
// 定位兼容性
// ========================================
.sticky {
  position: -webkit-sticky;
  position: sticky;
}

// ========================================
// 外观兼容性
// ========================================
.appearance-none {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

// ========================================
// 触摸反馈
// ========================================
.tap-highlight-none {
  -webkit-tap-highlight-color: transparent;
}

// ========================================
// 滚动条样式 (Webkit)
// ========================================
.custom-scrollbar {
  &::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  &::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 3px;
  }

  &::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 3px;

    &:hover {
      background: #94a3b8;
    }
  }

  // Firefox
  scrollbar-width: thin;
  scrollbar-color: #cbd5e1 #f1f5f9;
}

.scrollbar-hidden {
  -ms-overflow-style: none;  // IE 10+
  scrollbar-width: none;  // Firefox
  
  &::-webkit-scrollbar {
    display: none;  // Chrome/Safari/Opera
  }
}

// ========================================
// 图片兼容性
// ========================================
.object-cover {
  -o-object-fit: cover;
  object-fit: cover;
}

.object-contain {
  -o-object-fit: contain;
  object-fit: contain;
}

// ========================================
// 表单元素兼容性
// ========================================
input, textarea, select, button {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}

// 移除iOS上的圆角
input[type="text"],
input[type="email"],
input[type="password"],
input[type="search"],
input[type="tel"],
input[type="url"],
textarea {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  border-radius: 0;
}

// 移除数字输入框的箭头
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield;
}

// 移除搜索框的清除按钮和搜索图标
input[type="search"]::-webkit-search-decoration,
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-results-button,
input[type="search"]::-webkit-search-results-decoration {
  -webkit-appearance: none;
}

// ========================================
// 边框盒模型 (全局)
// ========================================
*, *::before, *::after {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

// ========================================
// 字体渲染优化
// ========================================
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

// ========================================
// 高DPI屏幕适配
// ========================================
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .border-retina {
    border-width: 0.5px;
  }
}

// ========================================
// 暗色模式支持
// ========================================
@media (prefers-color-scheme: dark) {
  .dark-mode-auto {
    // 可根据需要添加暗色模式样式
  }
}

// ========================================
// 减少动画偏好
// ========================================
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    -webkit-animation-duration: 0.01ms !important;
    animation-duration: 0.01ms !important;
    -webkit-animation-iteration-count: 1 !important;
    animation-iteration-count: 1 !important;
    -webkit-transition-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
